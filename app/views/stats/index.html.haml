%h1 Questions

.col-md-3.pull-right
  = form_tag(stats_url, method: :get) do
    .input-group
      = text_field_tag 'searchterm', nil, class: 'form-control', placeholder: 'Search'
      %span.input-group-btn
        = button_tag(type: 'submit', id: 'searchbutton', class: 'btn btn-default') do
          %i.glyphicon.glyphicon-search

%table.table.table-hover
  %thead
    %tr
      %th Date
      %th Category
      %th Answer
      %th Year
      %th Question
      %th Source
      %th Link
      %th
      
  %tbody
    - @stats.each do |stat|
      %tr
        %td= stat.id.generation_time.strftime('%Y-%m-%d')
        %td= stat.category.capitalize
        %td= stat.answer
        %td= stat.year
        %td= stat.question
        %td= stat.source
        %td= link_to 'Click here', stat.link
        %td
          = link_to 'Show', stat, class: 'btn btn-primary btn-xs'
          = link_to 'Edit', edit_stat_path(stat), class: 'btn btn-info btn-xs'
          = link_to 'Destroy', stat, :method => :delete, :data => { :confirm => 'Are you sure?' }, class: 'btn btn-danger btn-xs'
- if @stats.empty?
  %p No results found
= paginate @stats

%br

= link_to new_stat_path, class: 'btn btn-success' do
  %i.glyphicon.glyphicon-plus
  New Stat

= link_to 'Sync', sync_stats_path, method: :post, class: 'btn btn-success'
- if @sqlite_file
  %p Last sync: #{link_to @sqlite_file.id.generation_time, sync_stats_path, method: :get}
- else
  %p Last sync: Never